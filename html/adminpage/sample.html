<?php
include '../../php/conn_db.php';
session_start();
$userId = $_SESSION['id'];

$sql = "SELECT * FROM register WHERE id = ?";
$stmt = $conn->prepare($sql);
$stmt->bind_param("i", $userId);
$stmt->execute();
$result = $stmt->get_result();

if (!$result) {
    die("Invalid query: " . $conn->error); 
}

$row = $result->fetch_assoc();
if (!$row) {
    die("User not found.");
}
?>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Form Submission</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <linl rel="stylesheet" href="../../css/ofw_home.css">
</head>

<body data-bs-spy="scroll" data-bs-target="#scrollspy-menu" data-bs-offset="10" tabindex="0">
  <div class="outer-container">
  <div class="container-fluid">
    <!-- Scrollspy Menu -->
    <nav id="scrollspy-menu" class="nav flex-column nav-pills">
      <a class="nav-link" href="#section1">Personal Information</a>
      <a class="nav-link" href="#section2">Applicant information</a>
      <a class="nav-link" href="#section3">Learners Information</a>
      <a class="nav-link" href="#section4">OFW Information</a>
    </nav>

    <!-- Form Content -->
    <div class="form-content">
      <form action="submit_form.php" method="POST">
        
        <!-- Personal Information -->
        <div id="section1" class="input-group">
          <h4>Personal Information</h4>
          <table>
            <tr>
              <td>
                <label for="firstName">First Name</label>
                <input type="text" id="firstName" name="firstName" class="form-control" required>
              </td>
              <td>
                <label for="middleName">Middle Name</label>
                <input type="text" id="middleName" name="middleName" class="form-control">
              </td>
              <td>
                <label for="lastName">Last Name</label>
                <input type="text" id="lastName" name="lastName" class="form-control" required>
              </td>
            </tr>
            <tr>
              <td>
                <label for="age">Age</label>
                <input type="number" id="age" name="age" class="form-control" required>
              </td>
              <td>
                <label for="dob">Date of Birth</label>
                <input type="date" id="dob" name="dob" class="form-control" required>
              </td>
              <td>
                <label for="contactNo">Contact No.</label>
                <input type="tel" id="contactNo" name="contactNo" class="form-control" required>
              </td>
            </tr>
            <tr>
              <td>
                <label for="sex">Sex</label>
                <select id="sex" name="sex" class="form-control" required>
                  <option value="Male">Male</option>
                  <option value="Female">Female</option>
                </select>
              </td>
              <td>
                <label for="civilStatus">Civil Status</label>
                <select id="civilStatus" name="civilStatus" class="form-control" required>
                  <option value="Single">Single</option>
                  <option value="Married">Married</option>
                  <option value="Widowed">Widowed</option>
                  <option value="Separated">Separated</option>
                </select>
              </td>
              <td>
                <label for="email">Email</label>
                <input type="email" id="email" name="email" class="form-control" required>
              </td>
            </tr>
            <tr>
                <td>
                    <label for="houseNo">House No.</label>
                    <input type="text" id="houseNo" name="houseNo" class="form-control" required>
                </td>
                <td>
                    <label for="subdivision">Subdivision</label>
                    <input type="text" id="subdivision" name="subdivision" class="form-control">
                </td>
                <td>
                    <label for="barangay">Barangay</label>
                    <input type="text" id="barangay" name="barangay" class="form-control" required>
                </td>
              </tr>
              <tr>
                <td>
                    <label for="city">City/Municipality</label>
                    <input type="text" id="city" name="city" class="form-control" required>
                </td>
                <td>
                    <label for="province">Province</label>
                    <input type="text" id="province" name="province" class="form-control" required>
                </td>
                <td>
                    <label for="sssNo">SSS No.</label>
                    <input type="text" id="sssNo" name="sssNo" class="form-control">
                </td>
              </tr>
              <tr>
                <td>
                    <label for="pagibigNo">Pag-IBIG No.</label>
                    <input type="text" id="pagibigNo" name="pagibigNo" class="form-control">
                </td>
                <td>
                    <label for="philhealthNo">PhilHealth No.</label>
                    <input type="text" id="philhealthNo" name="philhealthNo" class="form-control">
                </td>
                <td>
                    <label for="passportNo">Passport No.</label>
                    <input type="text" id="passportNo" name="passportNo" class="form-control">
                </td>
              </tr>
              <tr>
                <td>
                    <label for="immigrationStatus">Immigration Status</label>
                    <select id="immigrationStatus" name="immigrationStatus" class="form-control" required>
                        <option value="Documented">Documented</option>
                        <option value="Undocumented">Undocumented</option>
                        <option value="Returning">Returning</option>
                        <option value="Repatriated">Repatriated</option>
                    </select>
                </td>
                <td>
                    <!-- <label for="immigrationStatus">Immigration Status</label>
                    <select id="immigrationStatus" name="immigrationStatus" class="form-control" required>
                        <option value="Documented">Documented</option>
                        <option value="Undocumented">Undocumented</option>
                        <option value="Returning">Returning</option>
                        <option value="Repatriated">Repatriated</option>
                    </select> -->
                </td>
                <td>
                    <!-- <label for="immigrationStatus">Immigration Status</label>
                    <select id="immigrationStatus" name="immigrationStatus" required>
                        <option value="Documented">Documented</option>
                        <option value="Undocumented">Undocumented</option>
                        <option value="Returning">Returning</option>
                        <option value="Repatriated">Repatriated</option>
                    </select> -->
                </td>
              </tr>
          </table>
        </div>

        <!-- Family Information -->
        <div id="section2" class="input-group">
          <h4>Family Information</h4>
          <table>
            <tr>
              <td>
                <label for="spouseName">Spouse's Name</label>
                <input type="text" id="spouseName" name="spouseName" class="form-control">
              </td>
              <td>
                <label for="spouseContact">Spouse's Contact No.</label>
                <input type="text" id="spouseContact" name="spouseContact" class="form-control">
              </td>
              <td>
                <label for="fathersName">Father's Name</label>
                <input type="text" id="fathersName" name="fathersName" class="form-control">
              </td>
            </tr>
            <tr>
              <td>
                <label for="fathersAddress">Father's Address</label>
                <input type="text" id="fathersAddress" name="fathersAddress" class="form-control">
              </td>
              <td>
                <label for="mothersName">Mother's Name</label>
                <input type="text" id="mothersName" name="mothersName" class="form-control">
              </td>
              <td>
                <label for="mothersAddress">Mother's Address</label>
                <input type="text" id="mothersAddress" name="mothersAddress" class="form-control">
              </td>
            </tr>
            <tr>
                <td>
                    <label for="emergency-contact">In Case of Emergency, Contact Person</label>
                    <input type="text" id="emergency-contact" class="form-control" placeholder="Contact Person">
                </td>
                <td>
                    <label for="next-of-kin-relationship">Relationship to Next of Kin</label>
                    <input type="text" id="next-of-kin-relationship" class="form-control" placeholder="Relationship">
                </td>
                <td>
                    <label for="next-of-kin-contact">Next of Kin's Contact Number</label>
                    <input type="text" id="next-of-kin-contact" class="form-control" placeholder="Contact Number">
                </td>
              </tr>
          </table>
        </div>

        <!-- Educational Information -->
        <div id="section3" class="input-group">
          <h4>Educational Information</h4>
          <label for="educationLevel">Highest Educational Attainment</label>
          <select id="educationLevel" name="educationLevel" class="form-control">
            <option value="elementary-undergraduate">Elementary Undergraduate</option>
            <option value="college-graduate">College Graduate</option>
            <option value="high-school-graduate">High School Graduate</option>
          </select>
        </div>

        <!-- Employment Details -->
        <div id="section4" class="input-group">
          <h4>Employment Details</h4>
          <label for="occupation">Occupation</label>
          <input type="text" id="occupation" name="occupation" class="form-control">
        </div>

        <button type="submit" class="btn btn-primary">Submit</button>
      </form>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
